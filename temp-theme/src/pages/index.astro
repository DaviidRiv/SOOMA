---
import Layout from '~/layouts/PageLayout.astro';
import ToTopButton from '~/components/common/ToTopButton.astro';
import Features from '~/components/widgets/Features.astro';
import Content from '~/components/widgets/Content.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import HeroBgCarouselReact from '~/components/widgets/HeroBgCarouselRact.tsx';
import MvvCards from '~/components/widgets/MvvCards.astro';

const metadata = {
  title: 'SOOMA Consultores — Inicio',
  description:
    'Consultoría y capacitación en seguridad y desarrollo humano para instituciones educativas, empresas y sector público.',
};

// ====== Datos centralizados ======
const address = 'Cañada Real 316, C.P. 78215, Lomas del Tecnológico, San Luis Potosí, S.L.P.';
const mapsQuery = encodeURIComponent(address);
const mapsEmbed = `https://www.google.com/maps?q=${mapsQuery}&output=embed`;
const mapsLink = `https://maps.google.com/?q=${mapsQuery}`;

const emailTo = 'emmaidaliasaldana@gmail.com';
const gmailLink = `https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(emailTo)}&su=${encodeURIComponent('Consulta — SOOMA')}&body=${encodeURIComponent('Hola, me interesa un diagnóstico para mi institución.')}`;

const waE164 = '524441425726'; // sin símbolos, para wa.me
const waLink = `https://wa.me/${waE164}?text=${encodeURIComponent('Hola, me interesa un diagnóstico para mi institución.')}`;
const waHuman = '+52 444 142 5726';

// Ruta de tu logo (colócalo en /public de tu proyecto activo)
const logoSrc = '/logo-sooma.jpg';
---

<Layout metadata={metadata}>
  <!-- Hero *********************************** -->
  <HeroBgCarouselReact
  client:idle
  heightClass="min-h-[70svh] md:min-h-[105svh]"
  mobileHeightClass="min-h-[78svh]"
  desktopHeightClass="md:min-h-[105svh]"

  mobileDisplayMode="contain-blur"
  desktopDisplayMode="cover"
  mobileForegroundScale={0.95}

  images={[
    { src: '/images/sooma-hero/1.gif', alt: 'Consultoría IT' },
    { src: '/images/sooma-hero/2.gif', alt: 'Consultoría Legal' },
    { src: '/images/sooma-hero/3.gif', alt: 'Ciberseguridad' },
    { src: '/images/sooma-hero/4.gif', alt: 'Sistema de Gestión de Seguridad' },
    { src: '/images/sooma-hero/5.gif', alt: 'AI para empresas' },
    { src: '/images/sooma-hero/6.gif', alt: 'Prevención de la Violencia' },
    { src: '/images/sooma-hero/7.gif', alt: 'Seguridad Física' },
  ]}
  interval={6000}
  actions={[
    { variant: 'primary', text: 'Solicitar diagnóstico', href: '#contacto', target: '_self' },
    { variant: 'ghost',   text: 'Conócenos', href: '/#nosotros' },
  ]}
/>


  <!-- Misión · Visión · Valores **************** -->
  <MvvCards
    id="mvv"
    tagline="Identidad"
    title="Misión · Visión · Valores"
    subtitle="Nuestra guía para acompañarte con profesionalismo, precisión operativa y enfoque humano."
    items={[
      {
        title: 'Misión',
        img: { src: '/images/mvv/mision.jpg', alt: 'Misión SOOMA' },
        description:
          'Proteger a personas, activos e información mediante soluciones integrales de seguridad física y ciberseguridad. Suministramos equipamiento operativo (uniformes, accesorios y drones), realizamos análisis de riesgos para evaluar la seguridad física y patrimonial, y formamos y certificamos equipos humanos, con enfoque legal, ético y basado en datos para reducir incidentes y elevar la resiliencia de cada cliente.',
      },
      {
        title: 'Visión',
        img: { src: '/images/mvv/vision.jpg', alt: 'Visión SOOMA' },
        description:
          'Ser la firma mexicana de referencia en seguridad convergente (física-digital), reconocida por su innovación, precisión operativa y formación certificable. Construimos alianzas duraderas con instituciones públicas y empresas privadas en México y LATAM, transformando la gestión del riesgo en ventaja competitiva y cultura de seguridad sostenible.',
      },
      {
        title: 'Valores',
        img: { src: '/images/mvv/valores.jpg', alt: 'Valores SOOMA' },
        bullets: [
          'Integridad',
          'Profesionalismo',
          'Enfoque humano',
          'Innovación',
          'Precisión operativa',
          'Mejora continua',
          'Confidencialidad',
        ],
      },
    ]}
  />

  <!-- Nosotros ********************************* -->
  <Content
    id="nosotros"
    isReversed
    tagline="¿Quiénes somos?"
    title="Metodología y experiencia para resultados medibles"
    items={[
      { title: 'Equipo multidisciplinario', description: 'Especialistas en seguridad escolar, intramuros, laboral; ciberseguridad y protección de datos.' },
      { title: 'Metodología', description: 'Diagnóstico → Planificación → Implementación → Evaluación, con indicadores y seguimiento.' },
      { title: 'Capacitación a medida', description: 'Técnica, profesional y de desarrollo humano para todos los niveles, incluida alta dirección.' },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=2070&q=80',
      alt: 'Equipo de trabajo en sesión',
    }}
  >
    <Fragment slot="content">
      <p>
        Combinamos práctica operativa y administración para estandarizar procesos, reducir errores y fortalecer la
        prevención. Los cambios se notan en servicio, seguridad y satisfacción.
      </p>
    </Fragment>
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50/60 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Contacto ******************************** -->
  <section id="contacto" class="py-16">
    <div class="mx-auto max-w-7xl px-6">
      <div class="grid items-stretch gap-8 md:grid-cols-2">
        <!-- Columna izquierda: imagen + datos -->
        <div class="relative overflow-hidden rounded-2xl shadow-lg">
          <img
            src="/images/Contacto/Contact.jpg"
            alt="Línea directa de contacto SOOMA"
            class="h-full"
            loading="lazy"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-slate-900/70 via-slate-900/30 to-transparent"></div>

          <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
            <p class="text-sm uppercase tracking-wider text-white/80">Contáctanos</p>
            <h3 class="mt-1 text-2xl font-bold">Ponte en contacto</h3>

            <div class="mt-6 space-y-3 text-white/90">
              <div>
                <p class="text-xs uppercase text-white/70">Correo electrónico</p>
                <p class="font-semibold break-all">{emailTo}</p>
              </div>
              <div>
                <p class="text-xs uppercase text-white/70">Teléfono / WhatsApp</p>
                <p class="font-semibold">{waHuman}</p>
              </div>
              <div>
                <p class="text-xs uppercase text-white/70">Dirección</p>
                <p class="font-semibold">{address}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Columna derecha: formulario -->
        <div class="rounded-2xl bg-white p-6 shadow-xl dark:bg-slate-900/60">
          <div class="mb-6 text-center">
            <p class="text-sm uppercase tracking-wide text-accent">Contáctanos</p>
            <h2 class="mt-1 text-3xl font-bold">Enviar un mensaje</h2>
            <p class="mt-2 text-slate-600 dark:text-slate-300">
              Déjanos tu nombre, correo y tu mensaje. Te respondemos a la brevedad.
            </p>
          </div>

          <form
            class="grid gap-4"
            onsubmit="event.preventDefault(); alert('¡Gracias! Pronto te contactamos. (Conecta Formspree o tu API)');"
          >
            <div class="grid gap-4 md:grid-cols-2">
              <div>
                <label class="mb-1 block text-sm font-medium">Nombre</label>
                <div class="relative">
                  <input class="w-full rounded-lg border px-3 py-2 pl-10" placeholder="Nombre" required aria-label="Nombre" />
                  <svg class="pointer-events-none absolute left-3 top-2.5 h-5 w-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a8.25 8.25 0 0115 0" />
                  </svg>
                </div>
              </div>

              <div>
                <label class="mb-1 block text-sm font-medium">Correo electrónico</label>
                <div class="relative">
                  <input type="email" class="w-full rounded-lg border px-3 py-2 pl-10" placeholder="Correo electrónico" required aria-label="Correo electrónico" />
                  <svg class="pointer-events-none absolute left-3 top-2.5 h-5 w-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21.75 7.5l-9.75 6-9.75-6m19.5 0A2.25 2.25 0 0019.5 5.25h-15A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75h15a2.25 2.25 0 002.25-2.25v-9z" />
                  </svg>
                </div>
              </div>
            </div>

            <div>
              <label class="mb-1 block text-sm font-medium">Mensaje</label>
              <textarea rows="6" class="w-full rounded-lg border px-3 py-2" placeholder="Escribe tu mensaje aquí..." required aria-label="Mensaje"></textarea>
            </div>

            <div class="flex items-start gap-2 text-sm text-slate-600 dark:text-slate-300">
              <input id="consent" type="checkbox" required class="mt-1" />
              <label for="consent">Acepto ser contactado con fines informativos y comerciales.</label>
            </div>

            <button class="mt-2 w-full rounded-lg bg-accent px-4 py-2 font-semibold text-white hover:opacity-90">
              Enviar
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Mapa ************************************ -->
  <section id="mapa" class="py-16">
    <div class="mx-auto max-w-7xl px-6">
      <div class="relative overflow-hidden rounded-2xl bg-slate-100 shadow-lg">
        <div class="h-[420px] w-full">
          <iframe
            class="h-full w-full"
            loading="lazy"
            allowfullscreen
            referrerpolicy="no-referrer-when-downgrade"
            src={mapsEmbed}
            title="Ubicación SOOMA"
          ></iframe>
        </div>

        <div class="absolute left-4 top-4 w-[min(360px,92%)] rounded-xl bg-white p-4 shadow-xl ring-1 ring-black/5 md:left-6 md:top-6">
          <p class="text-xs uppercase tracking-wide text-accent">Ubicación</p>
          <h3 class="text-lg font-semibold">SOOMA Consultores</h3>
          <p class="mt-1 text-sm text-slate-600">
            {address} <br />
            Atención: Lun–Vie 9:00–18:00
          </p>

          <div class="mt-4 grid grid-cols-2 gap-2">
            <a class="rounded-lg bg-slate-900 px-3 py-2 text-center text-sm font-medium text-white hover:opacity-90" href={mapsLink} target="_blank" rel="noreferrer">
              Abrir en Google Maps
            </a>
            <a class="rounded-lg bg-white px-3 py-2 text-center text-sm font-medium ring-1 ring-slate-200 hover:bg-slate-50" href="#contacto">
              Contacto
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA final ******************************* -->
  <CallToAction
    actions={[
      { variant: 'primary', text: 'Agendar diagnóstico sin costo', href: '#contacto', target: '_self', icon: 'tabler:calendar' },
    ]}
  >
    <Fragment slot="title">¿Listos para empezar?</Fragment>
    <Fragment slot="subtitle">Conversemos y definamos un plan a la medida de tu organización.</Fragment>
  </CallToAction>
  <!-- Botón flotante: volver arriba (componente reusable) -->
<ToTopButton threshold={400} bottom="1.25rem" right="1.25rem" label="Volver arriba" />

</Layout>
